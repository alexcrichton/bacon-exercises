<!doctype html>
<script type="importmap">
{
  "imports": {
    "@bytecodealliance/preview2-shim/cli":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/cli.js",
    "@bytecodealliance/preview2-shim/clocks":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/clocks.js",
    "@bytecodealliance/preview2-shim/filesystem":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/filesystem.js",
    "@bytecodealliance/preview2-shim/http":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/http.js",
    "@bytecodealliance/preview2-shim/io": "./src/wasi-io.js",
    "@bytecodealliance/preview2-shim/logging":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/logging.js",
    "@bytecodealliance/preview2-shim/poll":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/poll.js",
    "@bytecodealliance/preview2-shim/random":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/random.js",
    "@bytecodealliance/preview2-shim/sockets":
      "https://unpkg.com/@bytecodealliance/preview2-shim@0.0.13/lib/browser/sockets.js",
    "@bytecodealliance/jco":
      "https://unpkg.com/@bytecodealliance/jco@0.11.0/src/api.js",
    "fs/promises": "./src/shims.js",
    "url": "./src/shims.js",
    "chalk-template": "./src/shims.js",
    "#ora": "./src/shims.js",
    "node:crypto": "./src/shims.js",
    "node:path": "./src/shims.js",
    "node:fs/promises": "./src/shims.js",
    "node:os": "./src/shims.js",
    "node:child_process": "./src/shims.js",
    "node:process": "./src/shims.js",
    "path": "./src/shims.js",
    "terser": "./src/shims.js",
    "who-to-greet": "./src/who-to-greet.js"
  }
}
</script>
<html lang="en">
  <head>
    <title>Component Exercises</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="./style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>

  <body>


<div class="container">
  <h2>Component Model Exercises</h2>
  <p>
    Each of the exercises below has a problem where your goal is to upload a
    component and solve the problem at hand. Select an exercise, read it over,
    and then upload a component to execute it via the button below.
  </p>
  <p>
    Each exercise is accompanied with a
    <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/WIT.md">WIT <code>world</code></a>
    which indicates what the "shape" of uploaded components must look like. This
    specifies what can be imported into a component and what must be exported
    from a component. Most exercises work with the "command world" which means
    that a run and/or main function is exported and programs have access to
    utilities like stdio, clocks, randomness, etc. Some interfaces, such as
    WASI sockets, are not available on the web at this time (this is also sort
    of demo quality still).
  </p>
  <p>
    Exercises will log the components output and/or errors to the "Console
    output" section below. The goal of each exercise is to upload a component
    that prints the expected output. If the expected output is not produced or
    an error happens the "red X" will light up. When the exercise is completed
    the green checkmark will light up instead.
  </p>
  <p>
  </p>

  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#hello">Hello, World!</a></li>
    <li><a data-toggle="tab" href="#hello-name">Hello, $name!</a></li>
  </ul>

  <div class="tab-content">
    <div id="hello" class="tab-pane in active">
      <h3>Hello, World!</h3>
      <p>
        To learn about components here you need to upload a component which
        prints "Hello, world!", with a newline, to the console.

        Printing should happen via standard language I/O interfaces. The
        <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/WIT.md">WIT <code>world</code></a>
        for available to this exercie's components is:
      </p>
      <pre>
world demo {
  include <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/wasi/wit/deps/cli/command.wit">wasi:cli/command</a>
}
</pre>

    </div>
    <div id="hello-name" class="tab-pane in">
      <h3>Hello, $name!</h3>
      <p>
	Now that you've built a single component, let's start exploring the
        component model. Here you're still going to print a greeting, but you
        need to greet someone specific to the test. The way this will be done is
        that you're going to import a function from the outer environment which
        returns a name that you're going to greet.
      </p>
      <p>
	Think of this as a sort of rudimentary pluging system. The
        <code>world</code> below describes the plugin API (just a single
        function) and you're trying to consume this function.
      </p>
      <p>
        This example will run the component twice to ensure that the correct
        name isn't hardcoded.
      </p>
      <pre>
world demo {
  include <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/wasi/wit/deps/cli/command.wit">wasi:cli/command</a>

  import who-to-greet: func() -&gt; string
}
</pre>

    </div>
  </div>
  <hr/>

  <div id='bad' class='result'>✕</div>
  <div id='ok' class='result'>✓</div>

      <label for=file>Upload a component:</label> <input disabled=true id='file' type='file'></input>
      <h4>Console output</h4>
      <pre id='console-output'>
</pre>
</div>

    <script type=module src='./src/index.js'></script>
  </body>
</html>

